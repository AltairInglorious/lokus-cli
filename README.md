# Lokus CLI

This package was created specifically for [Bun](https://bun.sh) environment and
implement toolchain for [Lokus](https://lokus.amadeustech.dev) i18n file format.

## Installing

```shell
bun add -g @amadeustech/lokus-cli
```

## Usage

1. Create a lokus dictionary file in any way (for example with [official web app](https://lokus.amadeustech.dev))
2. Generate typescript types and const via this CLI `lokus generate-config -o output.ts dictionary.lokus`
3. Put `output.ts` to your project and use

In output you will get something like this

```typescript
// Autogenerated by Lokus
export const LokusDictionary = {
	type: "dictionary",
	baseLanguage: "en",
	timestamp: 1748694667861,
	base: {
		"landing.title": "Lokus — universal translation software",
	},
	dictionaries: {
		uk: {
			"landing.title": "Lokus — універсальне програмне забезпечення для перекладу",
		},
	},
} as const;

export type LokusDictionaryType = Record<
	keyof typeof LokusDictionary.base,
	string
>;

export type LokusLanguageType =
	| keyof typeof LokusDictionary.dictionaries
	| typeof LokusDictionary.baseLanguage;

export function getLokusLanguage(lang?: string): LokusLanguageType {
	if (!lang) return LokusDictionary.baseLanguage;
	if (lang in LokusDictionary.dictionaries) {
		return lang as keyof typeof LokusDictionary.dictionaries;
	}
	return LokusDictionary.baseLanguage;
}

export function getLokusDictionary(
	language: LokusLanguageType,
): LokusDictionaryType {
	if (language === LokusDictionary.baseLanguage) return LokusDictionary.base;
	return {
		...LokusDictionary.base,
		...LokusDictionary.dictionaries[language],
	};
}
```

Here you will always have `LokusDictionaryType`, `LokusLanguageType` types and `getLokusLanguage` `getLokusDictionary` functions which you can use to work with your translations.

```typescript
const dictionary = getLokusDictionary(getLokusLanguage(Astro.currentLocale));
return `<h1>${dictionary["landing.title"]}</h1>`
```